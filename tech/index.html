
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Technology overview &#8212; Zero to Bootcamp</title>
    
  <link rel="stylesheet" href="../_static/css/index.d431a4ee1c1efae0e38bdfebc22debff.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.bfb7730f9caf2ec0b46a44615585038c.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.30270b6e4c972e43c488.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://2i2c-org.github.io/zero-to-bootcamp/tech/index.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Zero to Bootcamp" href="../index.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />


<!-- Opengraph tags -->
<meta property="og:url"         content="https://2i2c-org.github.io/zero-to-bootcamp/tech/index.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Technology overview" />
<meta property="og:description" content="Technology overview  This section help you acquire an overview of involved technology, allowing you to better understand and architect a JupyterHub centered dep" />


<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  
  <h1 class="site-logo" id="site-title">Zero to Bootcamp</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Zero to Bootcamp
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Technology overview
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/tech/index.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/2i2c-org/zero-to-bootcamp"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/2i2c-org/zero-to-bootcamp/issues/new?title=Issue%20on%20page%20%2Ftech/index.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/2i2c-org/zero-to-bootcamp/edit/master/book/tech/index.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prerequisite-tech">
   Prerequisite tech
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#yaml">
     yaml
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-and-github">
     Git and GitHub
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#docker">
     docker
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#markdown">
     Markdown
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#core-tech">
   Core tech
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#jupyterhub">
     JupyterHub
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#kubernetes">
     Kubernetes
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#essential-kubernetes-terminology">
       Essential Kubernetes terminology
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#helm">
     Helm
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#essential-helm-terminology">
       Essential Helm terminology
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-jupyterhub-helm-chart">
     The JupyterHub Helm chart
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#assisting-tech">
   Assisting tech
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hubploy">
     hubploy
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#repo2docker">
     repo2docker
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sops-and-kms">
     sops and KMS
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#hubploy-s-sops-integration">
       Hubploy’s sops integration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#jupyter-book">
     jupyter-book
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ci-github-actions">
     CI - GitHub Actions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#grafana-and-prometheus">
     Grafana and Prometheus
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#collecting-metrics-prometheus">
       Collecting metrics - Prometheus
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#viewing-metrics-grafana">
       Viewing metrics - Grafana
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#network-file-system-nfs">
     Network File System (NFS)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#network-address-translation-nat">
     Network Address Translation (NAT)
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="technology-overview">
<h1>Technology overview<a class="headerlink" href="#technology-overview" title="Permalink to this headline">¶</a></h1>
<p>This section help you acquire an overview of involved technology, allowing you to better understand and architect a JupyterHub centered deployment in a Kubernetes environment.</p>
<p>The involved technology is grouped in the categories: <em>prerequisite</em>, <em>core</em>, and <em>assisting</em>.</p>
<div class="section" id="prerequisite-tech">
<h2>Prerequisite tech<a class="headerlink" href="#prerequisite-tech" title="Permalink to this headline">¶</a></h2>
<p>To acquire some familiarity with this technology is very rewarding for the ability to understand and work with the other technology.</p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition-learn-yaml admonition">
<p class="admonition-title">Learn YAML</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=cdLNKUoMc6c">A 10 minute introduction.</a></p></li>
</ul>
</div>
</div>
<div class="section" id="yaml">
<h3>yaml<a class="headerlink" href="#yaml" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://yaml.org/">YAML</a> is like JSON: a language to format data in text. YAML is used with many tools (<code class="docutils literal notranslate"><span class="pre">kubectl</span></code>, <code class="docutils literal notranslate"><span class="pre">helm</span></code>, <code class="docutils literal notranslate"><span class="pre">hubploy</span></code>, <code class="docutils literal notranslate"><span class="pre">jupyter-book</span></code>) so it is well worth ten minutes to get introduced to its syntax.</p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition-learn-git admonition">
<p class="admonition-title">Learn Git</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.pluralsight.com/courses/how-git-works">A thorough introduction.</a></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="git-and-github">
<h3>Git and GitHub<a class="headerlink" href="#git-and-github" title="Permalink to this headline">¶</a></h3>
<p>Basic knowledge of <a class="reference external" href="https://git-scm.com/">git</a> is assumed, such as knowing how to <em>clone</em>, <em>commit</em>, and <em>push</em>. To also understand the GitHub concept’s of a <em>Fork</em> and <em>Pull Request</em> is great.</p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition-learn-docker admonition">
<p class="admonition-title">Learn Docker</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=gAkwW2tuIqE">A 11 minute introduction.</a></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="docker">
<h3>docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h3>
<p>Basic knowledge of <a class="reference external" href="https://www.docker.com/">docker</a> is assumed, such as knowing that a <em>Dockerfile</em> can be built into an <em>image</em> which when run is referred to as a <em>container</em>.</p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition-learn-markdown admonition">
<p class="admonition-title">Learn Markdown</p>
<ul class="simple">
<li><p><a class="reference external" href="https://commonmark.org/help/tutorial/">A quick Markdown tutorial.</a></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="markdown">
<h3>Markdown<a class="headerlink" href="#markdown" title="Permalink to this headline">¶</a></h3>
<p><em>Markdown</em> is a way to format text used with GitHub, Jupyter notebooks, and <code class="docutils literal notranslate"><span class="pre">jupyter-book</span></code>. To recognize Markdown formatted text and be able to write headers and code sections is generally useful.</p>
</div>
</div>
<div class="section" id="core-tech">
<h2>Core tech<a class="headerlink" href="#core-tech" title="Permalink to this headline">¶</a></h2>
<div class="section" id="jupyterhub">
<h3>JupyterHub<a class="headerlink" href="#jupyterhub" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://jupyterhub.readthedocs.io/en/latest/">JupyterHub</a> is a web-server that allows its users to get access to a personal Jupyter server.</p>
<ul class="simple">
<li><p>JupyterHub <em>authenticates</em> (who?) and <em>authorize</em> (access?) its users with a <a class="reference external" href="https://jupyterhub.readthedocs.io/en/latest/reference/authenticators.html">JupyterHub Authenticator</a>.</p></li>
<li><p>JupyterHub <em>spawns</em> Jupyter servers for its users with a <a class="reference external" href="https://jupyterhub.readthedocs.io/en/latest/reference/spawners.html">JupyterHub Spawner</a>.</p></li>
<li><p>JupyterHub <em>routes</em> network access to the user servers with a <a class="reference external" href="https://jupyterhub.readthedocs.io/en/latest/reference/proxy.html">JupyterHub Proxy</a>.</p></li>
</ul>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition-learn-kubernetes admonition">
<p class="admonition-title">Learn Kubernetes</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=4ht22ReBjno">A good initial introduction.</a></p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=QJ4fODH6DXI">A good followup introduction.</a></p></li>
<li><p><a class="reference external" href="https://vimeo.com/245778144/4d1d597c5e">A thorough continuation.</a></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="kubernetes">
<h3>Kubernetes<a class="headerlink" href="#kubernetes" title="Permalink to this headline">¶</a></h3>
<p>An administrator of a <a class="reference external" href="https://kubernetes.io/">Kubernetes</a> cluster acts as an <em>orchestrator</em> of containers and their required networking and storage. In other words, the administrator can declare intentions and rely on the Kubernetes clusters machinery to fulfill the intentions. Intentions can for example be to always have two containers running, with 10GB persistent storage mounted, and to have a public IP address route incoming traffic to a running and ready container.</p>
<p>In practice administrators will register <em>Kubernetes resources</em> representing their intentions to the <em>Kubernetes API-server</em>, and following that the <em>Kubernetes controllers</em> for the respective resource types will work to ensure that this intent is met. As an example, an administrator can register a <em>Deployment resource</em> with the API-server using <code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">apply</span> <span class="pre">-f</span> <span class="pre">my-deployment-resource.yaml</span></code>. Following this, the <em>Deployment controller</em> that is part of the Kubernetes machinery will notice that and take responsibility to meet the intent of the Deployment resource: to always have a set of containers running.</p>
<div class="section" id="essential-kubernetes-terminology">
<h4>Essential Kubernetes terminology<a class="headerlink" href="#essential-kubernetes-terminology" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>A <em>Pod resource</em> is the intent to have a container running.</p></li>
<li><p>A <em>Persistent Volume Claim (PVC) resource</em> is the intent to allocate storage that can be used by a pod’s container.</p></li>
<li><p>A <em>Node resource</em> represents registered servers where pods can be scheduled to run.</p></li>
</ul>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition-learn-helm admonition">
<p class="admonition-title">Learn Helm</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=-ykwb1d0DXU">A 14 minute introduction.</a></p></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="helm">
<h3>Helm<a class="headerlink" href="#helm" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://helm.sh/">Helm</a> makes reuse, adjustments, and installing or upgrading, a collection of Kubernetes resources a lot simpler. <code class="docutils literal notranslate"><span class="pre">helm</span></code> is a command line tool to bundle Kubernetes <em>resource templates</em> and <em>default values</em> into a <em>Helm chart</em>.</p>
<p>Helm’s main job is to <em>render</em> a Helm chart’s resource templates, this is done using values explicitly passed in addition to the default values part of the Helm chart. When Helm installs or upgrades a Helm chart, it first renders the templates and then communicates with the Kubernetes API-server to register or update the rendered Kubernetes resources. Another feature of Helm is to enable <em>rollbacks</em>: to be able to revert to a previous state of an installed Helm chart.</p>
<div class="section" id="essential-helm-terminology">
<h4>Essential Helm terminology<a class="headerlink" href="#essential-helm-terminology" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>A <em>release</em> represent an installation of a Helm chart into a Kubernetes cluster.</p></li>
<li><p>A <em>revision</em> represent a version of a release.</p></li>
</ul>
</div>
</div>
<div class="section" id="the-jupyterhub-helm-chart">
<h3>The JupyterHub Helm chart<a class="headerlink" href="#the-jupyterhub-helm-chart" title="Permalink to this headline">¶</a></h3>
<p>The JupyterHub Helm chart makes it easier to install JupyterHub in a Kubernetes cluster. It is <a class="reference external" href="https://github.com/jupyterhub/zero-to-jupyterhub-k8s">developed on GitHub</a>, <a class="reference external" href="https://jupyterhub.github.io/helm-chart/#development-releases-jupyterhub">published online</a>, and comes with a <a class="reference external" href="https://z2jh.jupyter.org">how-to guide</a>.</p>
<p>The JupyterHub Helm chart installs more than just a container running JupyterHub in the Kubernetes cluster, so here is an overview of the Kubernetes Pods you will find.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hub</span></code> - A JupyterHub server.</p>
<ul>
<li><p><a class="reference external" href="https://github.com/jupyterhub/kubespawner">KubeSpawner</a> is the <em>JupyterHub Spawner</em>, spawning user Pods.</p></li>
<li><p><a class="reference external" href="https://github.com/jupyterhub/jupyterhub/blob/1.1.0/jupyterhub/proxy.py#L411">ConfigurableHTTPProxy (CHP, Python class)</a> is the <em>JupyterHub Proxy representation</em> used by JupyterHub, which speak with the actual CHP server in another pod.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">proxy</span></code> - A <a class="reference external" href="https://github.com/jupyterhub/configurable-http-proxy">ConfigurableHttpProxy (CHP, NodeJS server)</a> server that routes traffic as dynamically configured by the JupyterHub server’s Proxy representation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">autohttps</span></code> - A network proxy for incoming traffic that enables HTTPS communication. It can both acquire and updates TLS certificates from <a class="reference external" href="https://letsencrypt.org/">Let’s Encrypt</a> and manage decryption/encryption of incoming/outgoing traffic.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user-scheduler</span></code> - A configured <a class="reference external" href="https://kubernetes.io/docs/concepts/scheduling-eviction/kube-scheduler/">kube-scheduler</a> server that ensures that the spawned user Pods are packed tight on the nodes, which especially improves the ability to scale down nodes as new users don’t keep spreading out.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user-placeholder</span></code> - A set of dummy Pods to warm seats for user Pods. They trigger automatic autoscaling that adds nodes to the cluster if needed and if possible, and they get <em>evicted</em> in favor of actual user Pods when needed for a user Pod to fit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">continuous-image-puller</span></code> - A dummy Pod downloading the image(s) used by the user Pods ahead of time on each node where users can schedule.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hook-image-puller</span></code> - A temporary Pod like the <code class="docutils literal notranslate"><span class="pre">continuous-image-puller</span></code>, but to ensure images are pulled to nodes before a JupyterHub Helm chart reconfigures JupyterHub to start user pods with a new version of an image.</p></li>
</ul>
</div>
</div>
<div class="section" id="assisting-tech">
<h2>Assisting tech<a class="headerlink" href="#assisting-tech" title="Permalink to this headline">¶</a></h2>
<p>This tech is assisting in various ways.</p>
<div class="section" id="hubploy">
<h3>hubploy<a class="headerlink" href="#hubploy" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/yuvipanda/hubploy">hubploy</a> can automate the process of:</p>
<ul class="simple">
<li><p>using <code class="docutils literal notranslate"><span class="pre">repo2docker</span></code> to build a Docker image</p></li>
<li><p>using <code class="docutils literal notranslate"><span class="pre">sops</span></code> to temporary decrypt secret configuration for a local Helm chart</p></li>
<li><p>using <code class="docutils literal notranslate"><span class="pre">helm</span></code> to deploy a local Helm chart</p></li>
</ul>
</div>
<div class="section" id="repo2docker">
<h3>repo2docker<a class="headerlink" href="#repo2docker" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/jupyterhub/repo2docker"><code class="docutils literal notranslate"><span class="pre">repo2docker</span></code></a> is a tool to build a Docker image based on configuration files like <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>. It is what’s used in BinderHub’s like <a class="reference external" href="https://mybinder.org">mybinder.org</a> for example.</p>
</div>
<div class="section" id="sops-and-kms">
<h3>sops and KMS<a class="headerlink" href="#sops-and-kms" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/mozilla/sops"><code class="docutils literal notranslate"><span class="pre">sops</span></code></a> is a tool integrating with popular <em>Key Management Services</em> (KMS). <code class="docutils literal notranslate"><span class="pre">sops</span></code> and a KMS can help you reduce the security issues of storing encrypted content in a git repository.</p>
<p>These are benefits using <code class="docutils literal notranslate"><span class="pre">sops</span></code> and a KMS for encryption:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sops</span></code> help you edit files in memory without storing them decrypted on your computer.</p></li>
<li><p>The underlying KMS help you store also the key to decrypt off your computer.</p></li>
<li><p>If the credentials used by <code class="docutils literal notranslate"><span class="pre">sops</span></code> to work with the KMS become exposed, such as a key for a <em>service account</em> with permissions to access the KMS, you have some better options than if the decryption key itself was leaked.</p>
<ul>
<li><p>You can <em>revoke</em> the key to the service account that was exposed.</p></li>
<li><p>You can <em>audit</em> the KMS logs to decide if you think someone got hold of the decryption key while it was possible using the exposed service account key.</p></li>
</ul>
</li>
</ul>
<div class="section" id="hubploy-s-sops-integration">
<h4>Hubploy’s sops integration<a class="headerlink" href="#hubploy-s-sops-integration" title="Permalink to this headline">¶</a></h4>
<p>As using <code class="docutils literal notranslate"><span class="pre">helm</span></code> to upgrade your Helm chart requires access to decrypted secrets on the file system, you still end up with decrypted files on the file system which should be avoided. Thankfully, Hubploy’s integration with <code class="docutils literal notranslate"><span class="pre">sops</span></code> help to ensure those are only temporarily stored on the file system meanwhile <code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">upgrade</span></code> run, to be deleted directly after.</p>
</div>
</div>
<div class="section" id="jupyter-book">
<h3>jupyter-book<a class="headerlink" href="#jupyter-book" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/executablebooks/jupyter-book"><code class="docutils literal notranslate"><span class="pre">jupyter-book</span></code></a> is a command line tool with <a class="reference external" href="https://jupyterbook.org">excellent documentation</a> that help you all the way to get a good looking published website based on Jupyter notebooks and Markdown files.</p>
</div>
<div class="section" id="ci-github-actions">
<h3>CI - GitHub Actions<a class="headerlink" href="#ci-github-actions" title="Permalink to this headline">¶</a></h3>
<p>Continuous Integration (CI) is the practice and tooling to automate procedures following a change to a git repository.</p>
<p>For example, by putting <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> files in a GitHub repository’s <code class="docutils literal notranslate"><span class="pre">.github/workflows</span></code> folder, instructions within the files will automatically be followed by GitHub’s automated system referred to as <em>GitHub Actions</em>.</p>
<p>Possible uses of a CI system:</p>
<ul class="simple">
<li><p>To build a documentation with <code class="docutils literal notranslate"><span class="pre">jupyter-book</span></code> into HTML and JavaScript, and then pass it to be published by <em>GitHub Pages</em> - GitHub’s free service to publish basic websites.</p></li>
<li><p>To run <code class="docutils literal notranslate"><span class="pre">hubploy</span></code> to deploy an updated version of a Helm chart to a Kubernetes cluster.</p></li>
</ul>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition-learn-grafana-and-prometheus admonition">
<p class="admonition-title">Learn Grafana and Prometheus</p>
<ul class="simple">
<li><p><a class="reference external" href="https://play.grafana.org/">Live demo of Grafana.</a></p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=h4Sl21AKiDg">A 21 minute introduction to Prometheus.</a></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="grafana-and-prometheus">
<h3>Grafana and Prometheus<a class="headerlink" href="#grafana-and-prometheus" title="Permalink to this headline">¶</a></h3>
<p>To use <a class="reference external" href="https://www.prometheus.io/docs/introduction/overview/">Prometheus</a> and <a class="reference external" href="https://grafana.com/grafana/">Grafana</a> is not required alongside alongside a JupyterHub deployment, but they can provide an administrator with relevant insights, such as how many users are active and if things are running as they should.</p>
<div class="section" id="collecting-metrics-prometheus">
<h4>Collecting metrics - Prometheus<a class="headerlink" href="#collecting-metrics-prometheus" title="Permalink to this headline">¶</a></h4>
<p>Prometheus is used to collect <em>metrics</em> into a series of values that change over time, which it does by asking JupyterHub and other servers repeatedly. A metric from JupyterHub is for example how many running servers it currently manages. Prometheus is also responsible for storing this data for a certain time and exposing a way for Grafana and other services to ask it for information.</p>
<div class="admonition-good-to-know admonition">
<p class="admonition-title">Good to know</p>
<ul class="simple">
<li><p>JupyterHub expose its current metrics as plain text webpage under the <code class="docutils literal notranslate"><span class="pre">/hub/metrics</span></code> path. The plain text format follows a syntax specific to Prometheus.</p></li>
<li><p><a class="reference external" href="https://prometheus.io/docs/prometheus/latest/querying/basics/">PromQL</a> is a language to ask Prometheus for its collected metrics, which is used by Grafana.</p></li>
</ul>
</div>
</div>
<div class="section" id="viewing-metrics-grafana">
<h4>Viewing metrics - Grafana<a class="headerlink" href="#viewing-metrics-grafana" title="Permalink to this headline">¶</a></h4>
<p>Grafana allows an administrator of a JupyterHub to view already collected <em>metrics</em> in <em>dashboards</em>.</p>
<p>You can get by without needing to learn how to define your own dashboards by importing existing ones, such as <a class="reference external" href="https://github.com/neurohackademy/nh2020-jupyterhub/tree/master/grafana-dashboard-definitions">NeuroHackademy 2020’s dashboards</a>).</p>
</div>
</div>
<div class="section" id="network-file-system-nfs">
<h3>Network File System (NFS)<a class="headerlink" href="#network-file-system-nfs" title="Permalink to this headline">¶</a></h3>
<p>For a JupyterHub deployment, a Network File System (NFS) based storage can be a useful for various reasons. Below are common reasons to use NFS alongside a JupyterHub deployment on Kubernetes.</p>
<ol>
<li><p><strong>read/write storage for multiple user.</strong></p>
<p>By using NFS, you can configure access to storage with both read and write access from multiple locations.</p>
</li>
<li><p><strong>To reduce overprovisioning storage.</strong></p>
<p>By using NFS, you can let users share the provided space more efficiently. Instead of paying for a fixed amount of GB for each user, you can pay for the total storage needed by all users.</p>
</li>
</ol>
<p>To use NFS storage, you need a NFS server and storage that this NFS server controls. Cloud providers provide managed NFS servers, such as <a class="reference external" href="https://cloud.google.com/filestore">Google Filestore</a>, but you can also install your own NFS server, such as <a class="reference external" href="https://github.com/nfs-ganesha/nfs-ganesha/wiki">NFS Ganesha</a>, into your Kubernetes cluster using a Helm chart. A Helm chart to do this job is at the time of writing being migrated from <a class="reference external" href="https://github.com/helm/charts/tree/master/stable/nfs-server-provisioner">here</a> to <a class="reference external" href="https://github.com/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner/">here</a>.</p>
</div>
<div class="section" id="network-address-translation-nat">
<h3>Network Address Translation (NAT)<a class="headerlink" href="#network-address-translation-nat" title="Permalink to this headline">¶</a></h3>
<p>Network Address Translation (NAT) allows mapping of IP addresses and ports to other IP addresses and ports. This can be needed or useful for various reasons.</p>
<ol>
<li><p><strong>A single public IP for multiple devices.</strong></p>
<p>Both a public IP address and a device performing NAT is needed to allow devices with <a class="reference external" href="https://en.wikipedia.org/wiki/Private_network">private IP addresses</a> in a Local Area Network (LAN) to communicate with devices on the internet. This is because a network packet on the internet must have a declared origin that other devices can reach to respond, and a private IP address isn’t going to be unique as a public IP address provided by an internet provider.</p>
</li>
<li><p><strong>A predefined set of public IPs.</strong></p>
<p>If you go through a NAT to reach internet rather than an ephemeral machine, you will likely be able to control what public IPs the NAT will use. This can be useful if you want to configure a database to accept connections from a specific set of IPs for example. It can also be useful to ensure you have a collection of public IPs when accessing the internet, so services like GitHub receiving traffic doesn’t think that only one IP is sending all traffic, because then they may think their service is being abused.</p>
</li>
</ol>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./tech"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="../index.html" title="previous page">Zero to Bootcamp</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Erik Sundell<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.30270b6e4c972e43c488.js"></script>


    
  </body>
</html>